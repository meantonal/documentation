---
title: Intervals
description: An overview of how meantonal constructs intervals
sidebar:
  order: 2
---

import { Aside } from '@astrojs/starlight/components';
import { Steps } from '@astrojs/starlight/components';

Much like [pitches](/learn/pitch), Meantonal stores intervals as two-dimensional vectors. In fact, intervals are simply differences between two pitches' vectors:

$$\sf{C_4} = (25, 10) \quad \sf{E_4} = (27, 10)$$

$$\sf{E_4} - \sf{C_4} = (2, 0)$$

So $(2, 0)$ is the unique vector that defines a major third.

<Aside>

If we interchange pitches in the above calculation:

$$\sf{C_4} - \sf{E_4} = (-2, 0) = -(\sf{E_4} - \sf{C_4})$$

$(2, 0)$ is a major third _up_; $(-2, 0)$ is a major third _down_.

If $m$ is a *melodic* interval, $-m$ represents the same interval in the opposite direction.

If $m$ is a *vertical* interval, $-m$ represents the same interval with the parts interchanged (equivalent to [voice crossing](https://en.wikipedia.org/wiki/Voice_crossing)).

</Aside>

Internally, the [`Interval`](/c/types/#interval) type is a struct identical to the `Pitch` type:

```c
typedef struct {
    int w;
    int h;
} Interval;
```

## Semitones

Western music distinguishes between two types of semitones: **diatonic semitones** and **chromatic semitones**:

- Diatonic semitones always span two different letters, such as C to D&flat;.
- Chromatic semitones are defined as the difference between a whole step and a diatonic semitone, and are always between two different "flavours" of the same letter, such as C to C&sharp;.

Since Meantonal defines the whole step as $(1, 0)$, and the diatonic semitone as $(0, 1)$ (they are chosen as its [standard basis](https://en.wikipedia.org/wiki/Standard_basis)), the chromatic semitone is $(1, -1)$.

Different "qualities" of the same generic interval (such as major and minor thirds) are separated by chromatic semitones:

- A major third was seen to be $(2, 0)$
- A minor third is $(1, 1)$, or $(2, 0) - (1, -1)$
- An augmented third is $(3, -1)$, or $(2, 0) + (1, -1)$
- A diminished third is $(0, 2)$, or $(2, 0) - 2(1, -1)$

## Octaves

The octave is given by $(5, 2)$, which results naturally from the WWHWWWH formula of the major scale. As such, it is possible to create compound or simple versions of intervals by adding or subtracting multiples of $(5, 2)$

- A perfect fifth is $(3, 1)$
- A perfect twelfth is $(8, 3)$, or $(3, 1) + (5, 2)$

If subtracting or adding $(5, 2)$ causes an interval to cross to the other side of $(0, 0)$, it will be [inverted](<https://en.wikipedia.org/wiki/Inversion_(music)#Intervals>) at the octave.

- An ascending major third $(2, 0)$ will invert to a descending minor sixth $(-3, -2)$ when $(5, 2)$ is subtracted.

## Parsing intervals

The algorithm for constructing intervals from standard names like "A4" (for augmented fourth) or "m3" (for minor third) essentially works as follows:

<Steps>

1. Split the name into its generic size and quality.

   "A4" $\rightarrow$ ('A', 4)

2. Subtract 1 from the generic size to get its **stepspan**. This is the number of diatonic steps it contains; essentially a zero-indexed representation of its size, which is more amenable to arithmetic than the 1-indexed sizes used in conventional interval names.

   $$4 - 1 = 3$$

3. Divide by 7 using [Euclidean division](https://en.wikipedia.org/wiki/Euclidean_division). The remainder will represent the simple interval size, and the quotient will represent the number of octaves.

   $$3 \div 7 = 0, \;\sf{remainder}\; 3$$

   This allows simple and compound intervals to be handled by a single procedure.

4. The starting sizes of simple intervals follow a major scale:

   |         |         |
   | :-----: | :-----: |
   |    0    | $(0,0)$ |
   |    1    | $(1,0)$ |
   |    2    | $(2,0)$ |
   |    3    | $(2,1)$ |
   |    4    | $(3,1)$ |
   |    5    | $(4,1)$ |
   |    6    | $(5,1)$ |

   Choose the corresponding vector and add the appropriate number of octaves obtained in the previous step:

   $$(2,1) + 0(5,2) = (2,1)$$

5. Add the correct number of chromatic semitones to arrive at the correct _quality_.

   |        |                                            |
   | :----: | ------------------------------------------ |
   | _etc._ |                                            |
   |   AA   | $2$                                        |
   |   A    | $1$                                        |
   | P or M | $0$                                        |
   |   m    | $-1$                                       |
   |   d    | $-1$ if size is $0$, $3$ or $4$; else $-2$ |
   |   dd   | $-2$ if size is $0$, $3$ or $4$; else $-3$ |
   | _etc._ |                                            |

   "A4" $\rightarrow (2,1) + 1(1, -1) = (3, 0)$

</Steps>

<Aside>

If you're wondering about the irregularity with diminished intervals in that last step, conventional interval names divide intervals into two groups. Intervals in the first group have the following possible qualities:

*etc.* $\gt$ augmented $\gt$ perfect $\gt$ diminished $\gt$ *etc.*

Intervals in the second group have the following possible qualities:

*etc.* $\gt$ augmented $\gt$ major $\gt$ minor $\gt$ diminished $\gt$ *etc.*

We started from a major scale because all intervals above the tonic form major or perfect intervals. The adjustments we then make to account for diminished intervals, along with doubly-diminished and beyond, end up being different for intervals in the first group vs. intervals in the second:

- The first group passes from perfect straight to diminished.
- The second group has to pass from major through minor before reaching diminished.

</Aside>
